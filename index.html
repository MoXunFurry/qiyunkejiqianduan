<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>旌云科技—TT语音</title>
     <!-- 引入外部 CSS -->
    <link rel="stylesheet" href="css/mian.css">
</head>
<body>
    <!-- 自定义标题栏 -->
    <div class="title-bar">
        <div class="title-bar-left drag-region">
            <span class="app-title">旗云科技—TT语音</span>
        </div>
        <div class="title-bar-right">
            <button class="title-btn no-drag" id="minimize" title="最小化">🗕</button>
            <button class="title-btn no-drag" id="maximize" title="最大化">🗖</button>
            <button class="title-btn no-drag" id="fullscreen" title="全屏">⛶</button>
            <button class="title-btn no-drag close" id="close" title="关闭">✖</button>
        </div>
    </div>

    <div class="app-container">
        <!-- 左侧导航栏 -->
        <aside class="sidebar" role="navigation" aria-label="主导航">
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="home" role="button" tabindex="0" aria-current="page">
                            <span>主页</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="features" role="button" tabindex="0">
                            <span>功能</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings" role="button" tabindex="0">
                            <span>设置</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="about" role="button" tabindex="0">
                            <span>关于</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="profile" role="button" tabindex="0">
                            <span>我的</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- 右侧主内容区 -->
        <main class="main-content" role="main">
            <!-- 用户头像区域 -->
            <header class="user-header">
                <div class="user-info">
                    <img 
                        src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Ccircle cx='24' cy='24' r='24' fill='%23667eea'/%3E%3Ctext x='24' y='32' text-anchor='middle' fill='white' font-size='20' font-family='sans-serif'%3E用%3C/text%3E%3C/svg%3E"
                        alt="用户头像" 
                        class="user-avatar" 
                        id="user-avatar" 
                        tabindex="0"
                        role="button"
                        aria-label="点击更换头像"
                    >
                    <div class="user-details">
                        <h3 id="user-nickname">用户昵称</h3>
                        <p>欢迎使用毛玻璃界面</p>
                    </div>
                </div>
                <div class="animation-toggle">
                    <span>动画效果</span>
                    <div 
                        class="toggle-switch active" 
                        id="animation-toggle"
                        role="switch" 
                        aria-checked="true" 
                        tabindex="0"
                    ></div>
                </div>
            </header>

            <!-- 内容区域 -->
            <div class="content-area">
                <!-- 主页 -->
                <!-- <div class="page active" id="page-home">
                    <h1 class="page-title">欢迎使用毛玻璃界面</h1>
                    <div class="page-content">
                        <p>这是一个采用现代毛玻璃（Glassmorphism）设计风格的单页应用界面，现已集成自定义标题栏。</p>
                        <p>主要特性包括：</p>
                        <div class="feature-grid">
                            <div class="feature-card">
                                <h3>🎨 毛玻璃效果</h3>
                                <p>采用backdrop-filter实现的真实毛玻璃效果，支持透明背景，完美适配桌面透明窗口。</p>
                            </div>
                            <div class="feature-card">
                                <h3>🚀 流畅动画</h3>
                                <p>页面切换采用硬件加速的滑入滑出动画，可根据用户偏好和设备性能自动调整。</p>
                            </div>
                            <div class="feature-card">
                                <h3>♿ 无障碍支持</h3>
                                <p>完整的键盘导航支持，语义化HTML标签，ARIA属性，支持屏幕阅读器。</p>
                            </div>
                            <div class="feature-card">
                                <h3>📱 响应式设计</h3>
                                <p>针对常见PC分辨率优化，在1366×768到1920×1080范围内完美显示。</p>
                            </div>
                            <div class="feature-card">
                                <h3>🖼️ 自定义标题栏</h3>
                                <p>无边框窗口设计，自定义窗口控制按钮，支持拖拽调整大小，完美集成Electron应用。</p>
                            </div>
                            <div class="feature-card">
                                <h3>⚡ 性能优化</h3>
                                <p>仅使用GPU加速属性，避免布局回流，首屏渲染优化，轻量高效。</p>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!-- 功能页面 -->
                <div class="page" id="page-features">
                    <h1 class="page-title">设置中心</h1>
                    <div class="page-content">
                        <div class="settings-group">
                            <h3>🎭 音量增益</h3>
                            
                            <!-- 开关控制 -->
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>开启音量增益</h4>
                                    <p>启用或禁用音量增益效果</p>
                                </div>
                                <div 
                                    class="toggle-switch" 
                                    id="gain-toggle" 
                                    role="switch" 
                                    aria-checked="false" 
                                    tabindex="0">
                                </div>
                            </div>

                            <!-- 输入设备 -->
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>输入设备</h4>
                                    <p>选择麦克风输入设备</p>
                                </div>
                                <select id="input-device" class="styled-select"></select>
                            </div>

                            <!-- 输出设备 -->
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>输出设备</h4>
                                    <p>选择扬声器输出设备</p>
                                </div>
                                <select id="output-device" class="styled-select"></select>
                            </div>

                            <!-- 增益倍数 -->
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>增益倍数</h4>
                                    <p>设置音量放大倍数</p>
                                </div>
                                <div class="slider-container">
                                    <input type="range" id="gain-slider" min="0.2" max="20.0" value="2.0" step="0.1">
                                    <span id="gain-value-display">2.0x</span>
                                </div>
                            </div>

                            <!-- 保存按钮 -->
                            <div class="setting-item">
                                <button id="save-settings" class="save-button">保存设置</button>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- 设置页面 -->
                <div class="page" id="page-settings">
                    <h1 class="page-title">设置中心</h1>
                    <div class="page-content">
                        <div class="settings-group">
                            <h3>🎭 外观设置</h3>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>毛玻璃效果</h4>
                                    <p>启用或禁用背景模糊效果（需要浏览器支持）</p>
                                </div>
                                <div 
                                    class="toggle-switch active" 
                                    id="glass-effect-toggle"
                                    role="switch" 
                                    aria-checked="true" 
                                    tabindex="0"
                                ></div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>页面切换动画</h4>
                                    <p>启用或禁用页面切换的滑动动画效果</p>
                                </div>
                                <div 
                                    class="toggle-switch active" 
                                    id="settings-animation-toggle"
                                    role="switch" 
                                    aria-checked="true" 
                                    tabindex="0"
                                ></div>
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3>👤 用户设置</h3>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>用户昵称</h4>
                                    <p>设置显示在右上角的用户昵称</p>
                                </div>
                                <button class="btn" onclick="changeNickname()">修改昵称</button>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>头像管理</h4>
                                    <p>更换或重置用户头像</p>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn" onclick="selectAvatar()">选择头像</button>
                                    <button class="btn" onclick="resetAvatar()">重置默认</button>
                                </div>
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3>🖼️ 窗口控制</h3>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>测试窗口控制</h4>
                                    <p>测试自定义标题栏的各项功能</p>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn" onclick="testMinimize()">最小化测试</button>
                                    <button class="btn" onclick="testFullscreen()">全屏测试</button>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>窗口信息</h4>
                                    <p>当前窗口状态和控制说明</p>
                                </div>
                                <button class="btn" onclick="showWindowInfo()">查看详情</button>
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3>📊 数据管理</h3>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>导出设置</h4>
                                    <p>将当前设置导出为JSON文件</p>
                                </div>
                                <button class="btn" onclick="exportSettings()">导出设置</button>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>导入设置</h4>
                                    <p>从JSON文件导入设置数据</p>
                                </div>
                                <button class="btn" onclick="importSettings()">导入设置</button>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>重置所有设置</h4>
                                    <p>恢复到默认设置状态</p>
                                </div>
                                <button class="btn" onclick="resetAllSettings()" style="color: var(--accent-color);">重置设置</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 关于页面 -->
                <div class="page" id="page-about">
                    <h1 class="page-title">关于项目</h1>
                    <div class="page-content">
                        <h2>📋 项目信息</h2>
                        <p style="margin: 16px 0; line-height: 1.8;">
                            这是一个基于现代Web技术构建的毛玻璃风格单页应用界面。采用纯原生HTML、CSS和JavaScript实现，
                            无任何外部框架依赖，专为PC端桌面环境优化设计，现已完整集成自定义标题栏功能。
                        </p>

                        <h2 style="margin-top: 32px;">🔧 技术栈</h2>
                        <div class="feature-grid">
                            <div class="feature-card">
                                <h3>HTML5</h3>
                                <p>语义化标签结构，完整的无障碍属性支持，符合Web标准。</p>
                            </div>
                            <div class="feature-card">
                                <h3>CSS3</h3>
                                <p>现代CSS特性：backdrop-filter、CSS Grid、Flexbox、CSS变量等。</p>
                            </div>
                            <div class="feature-card">
                                <h3>Vanilla JS</h3>
                                <p>原生JavaScript实现，无框架依赖，轻量高效。</p>
                            </div>
                            <div class="feature-card">
                                <h3>Electron Ready</h3>
                                <p>完美集成Electron，支持自定义标题栏和窗口控制。</p>
                            </div>
                        </div>

                        <h2 style="margin-top: 32px;">🌟 设计特色</h2>
                        <ul style="margin: 16px 0; padding-left: 20px; line-height: 1.8;">
                            <li><strong>毛玻璃美学</strong> - 现代Glassmorphism设计风格，透明与模糊的完美结合</li>
                            <li><strong>动态背景</strong> - 微妙的浮动动画增强视觉层次感</li>
                            <li><strong>响应式布局</strong> - 针对1366×768、1440×900、1920×1080等主流PC分辨率优化</li>
                            <li><strong>无障碍友好</strong> - 完整的键盘导航、屏幕阅读器支持</li>
                            <li><strong>自定义标题栏</strong> - 无边框设计，完美融合系统外观</li>
                        </ul>

                        <h2 style="margin-top: 32px;">📱 Electron集成指南</h2>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 12px; margin: 16px 0;">
                            <p><strong>主进程配置：</strong></p>
                            <pre style="background: rgba(0, 0, 0, 0.2); padding: 12px; border-radius: 8px; margin: 12px 0; overflow-x: auto; font-family: 'Consolas', monospace; font-size: 14px; color: var(--text-primary);">
const win = new BrowserWindow({
  width: 1200,
  height: 800,
  frame: false,        // 隐藏默认标题栏
  transparent: true,   // 启用透明窗口
  resizable: true,     // 允许调整大小
  webPreferences: {
    nodeIntegration: false,
    contextIsolation: true,
    preload: path.join(__dirname, 'preload.js')
  }
});</pre>
                        </div>

                        <div style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 12px; margin: 16px 0;">
                            <p><strong>预加载脚本 (preload.js)：</strong></p>
                            <pre style="background: rgba(0, 0, 0, 0.2); padding: 12px; border-radius: 8px; margin: 12px 0; overflow-x: auto; font-family: 'Consolas', monospace; font-size: 14px; color: var(--text-primary);">
const { contextBridge, ipcRenderer } = require('electron');

contextBridge.exposeInMainWorld('electronAPI', {
  windowControl: (action) => ipcRenderer.send('window-control', action)
});</pre>
                        </div>

                        <h2 style="margin-top: 32px;">🔍 兼容性说明</h2>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 12px; margin: 16px 0;">
                            <p><strong>支持的浏览器：</strong></p>
                            <ul style="margin: 8px 0; padding-left: 20px;">
                                <li>Chrome 88+ (完整支持)</li>
                                <li>Edge 88+ (完整支持)</li>
                                <li>Safari 14+ (完整支持)</li>
                                <li>Firefox 103+ (部分支持，无backdrop-filter时自动降级)</li>
                            </ul>
                            <p><strong>Electron 版本：</strong>推荐 v21+ 以获得最佳的无边框窗口支持。</p>
                        </div>
                    </div>
                </div>

                <!-- 我的页面 -->
                <div class="page" id="page-profile">
                    <h1 class="page-title">个人中心</h1>
                    <div class="page-content">
                        <div class="settings-group">
                            <h3>👤 个人信息</h3>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>当前头像</h4>
                                    <p>点击头像可以更换新的头像图片</p>
                                </div>
                                <img 
                                    src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='32' fill='%23667eea'/%3E%3Ctext x='32' y='42' text-anchor='middle' fill='white' font-size='24' font-family='sans-serif'%3E用%3C/text%3E%3C/svg%3E"
                                    alt="个人头像预览" 
                                    id="profile-avatar-preview"
                                    style="width: 64px; height: 64px; border-radius: 50%; cursor: pointer; object-fit: cover;"
                                    onclick="selectAvatar()"
                                    tabindex="0"
                                    role="button"
                                    aria-label="点击更换头像"
                                >
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>用户昵称</h4>
                                    <p id="current-nickname">用户昵称</p>
                                </div>
                                <button class="btn btn-primary" onclick="changeNickname()">修改昵称</button>
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3>📈 使用统计</h3>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>页面访问次数</h4>
                                    <p>记录各页面的访问次数</p>
                                </div>
                                <button class="btn" onclick="showPageStats()">查看统计</button>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>首次使用时间</h4>
                                    <p id="first-visit-time">正在加载...</p>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>上次访问时间</h4>
                                    <p id="last-visit-time">正在加载...</p>
                                </div>
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3>🎨 个性化</h3>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>当前主题</h4>
                                    <p>毛玻璃透明主题</p>
                                </div>
                                <span style="padding: 4px 12px; background: rgba(102, 126, 234, 0.2); border-radius: 16px; font-size: 12px;">活跃</span>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>动画偏好</h4>
                                    <p id="animation-preference">已启用页面切换动画</p>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-description">
                                    <h4>窗口状态</h4>
                                    <p id="window-status">自定义标题栏已启用</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 隐藏的文件输入 -->
    <input type="file" id="avatar-input" accept="image/*" aria-hidden="true">
    <input type="file" id="settings-input" accept=".json" aria-hidden="true">

    <!-- 引入外部 JS -->
     <script src="JS/utils.js"></script>
    <script src="JS/main.js"></script>
</body>
</html>